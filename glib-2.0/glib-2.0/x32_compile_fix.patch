Received from H J Liu @intel
UpstreamStatus: Pending

Signed-Off-By: Nitin A Kamble <nitin.a.kamble@intel.com> 2011/07/13

--- glib-2.28.8/glib/Makefile.am.x32	2011-06-05 16:18:49.000000000 -0700
+++ glib-2.28.8/glib/Makefile.am	2011-07-13 07:00:51.350088697 -0700
@@ -347,10 +347,10 @@ INSTALL_PROGS=
 
 if ENABLE_DTRACE
 glib_probes.h: glib_probes.d Makefile
-	$(DTRACE) -C -h -s $< -o $@.tmp
+	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -C -h -s $< -o $@.tmp
 	sed -e "s,define STAP_HAS_SEMAPHORES 1,undef STAP_HAS_SEMAPHORES," < $@.tmp > $@ && rm -f $@.tmp
 glib_probes.o: glib_probes.d Makefile
-	$(DTRACE) -G -s $< -o $@
+	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -G -s $< -o $@
 BUILT_SOURCES += glib_probes.h glib_probes.o
 CLEANFILES += glib_probes.h glib_probes.h.tmp
 libglib_2_0_la_LIBADD += glib_probes.o
--- glib-2.28.8/glib/Makefile.in.x32	2011-06-05 16:24:51.000000000 -0700
+++ glib-2.28.8/glib/Makefile.in	2011-07-13 07:00:51.351088697 -0700
@@ -1745,10 +1745,10 @@ uninstall-local: uninstall-ms-lib uninst
 @OS_WIN32_AND_DLL_COMPILATION_FALSE@uninstall-def-file:
 
 @ENABLE_DTRACE_TRUE@glib_probes.h: glib_probes.d Makefile
-@ENABLE_DTRACE_TRUE@	$(DTRACE) -C -h -s $< -o $@.tmp
+@ENABLE_DTRACE_TRUE@	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -C -h -s $< -o $@.tmp
 @ENABLE_DTRACE_TRUE@	sed -e "s,define STAP_HAS_SEMAPHORES 1,undef STAP_HAS_SEMAPHORES," < $@.tmp > $@ && rm -f $@.tmp
 @ENABLE_DTRACE_TRUE@glib_probes.o: glib_probes.d Makefile
-@ENABLE_DTRACE_TRUE@	$(DTRACE) -G -s $< -o $@
+@ENABLE_DTRACE_TRUE@	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -G -s $< -o $@
 
 gspawn-win32-helper-console.c:
 	echo '#define HELPER_CONSOLE' >$@
--- glib-2.28.8/gobject/Makefile.am.x32	2011-06-05 16:18:50.000000000 -0700
+++ glib-2.28.8/gobject/Makefile.am	2011-07-13 07:09:42.410088595 -0700
@@ -140,10 +140,10 @@ BUILT_SOURCES = gmarshal.h gmarshal.c
 
 if ENABLE_DTRACE
 gobject_probes.h: gobject_probes.d Makefile
-	$(DTRACE) -C -h -s $< -o $@.tmp
+	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -C -h -s $< -o $@.tmp
 	sed -e "s,define STAP_HAS_SEMAPHORES 1,undef STAP_HAS_SEMAPHORES," < $@.tmp > $@ && rm -f $@.tmp
 gobject_probes.o: gobject_probes.d Makefile
-	$(DTRACE) -G -s $< -o $@
+	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -G -s $< -o $@
 BUILT_SOURCES += gobject_probes.h gobject_probes.o
 CLEANFILES += gobject_probes.h
 libgobject_2_0_la_LIBADD += gobject_probes.o
--- glib-2.28.8/gobject/Makefile.in.x32	2011-06-05 16:24:52.000000000 -0700
+++ glib-2.28.8/gobject/Makefile.in	2011-07-13 07:10:00.365088596 -0700
@@ -1430,10 +1430,10 @@ uninstall-ms-lib:
 @OS_WIN32_AND_DLL_COMPILATION_FALSE@uninstall-def-file:
 
 @ENABLE_DTRACE_TRUE@gobject_probes.h: gobject_probes.d Makefile
-@ENABLE_DTRACE_TRUE@	$(DTRACE) -C -h -s $< -o $@.tmp
+@ENABLE_DTRACE_TRUE@	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -C -h -s $< -o $@.tmp
 @ENABLE_DTRACE_TRUE@	sed -e "s,define STAP_HAS_SEMAPHORES 1,undef STAP_HAS_SEMAPHORES," < $@.tmp > $@ && rm -f $@.tmp
 @ENABLE_DTRACE_TRUE@gobject_probes.o: gobject_probes.d Makefile
-@ENABLE_DTRACE_TRUE@	$(DTRACE) -G -s $< -o $@
+@ENABLE_DTRACE_TRUE@	CC="$(CC)" CFLAGS="$(CFLAGS)" $(DTRACE) -G -s $< -o $@
 
 gmarshal.h: stamp-gmarshal.h
 	@true
